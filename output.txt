const int ledR = 3;
const int ledG = 9;
const int ledB = 11;

void setup() {
  // put your setup code here, to run once:
  pinMode(ledR, OUTPUT);
  pinMode(ledG, OUTPUT);
  pinMode(ledB, OUTPUT);
  pinMode(6, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // put your main code here, to run repeatedly:
  int brightness = analogRead(A0);
  int mbrightness = map(brightness,0, 1023, 0, 255);
  Serial.println(mbrightness);
  digitalWrite(6,HIGH);
  if (mbrightness > 20){
    int red, green, blue = 0;
    int x = brightness;
    red = 80 + log(x)*log(x)*sqrt(x) * 1.5;
    green = 200 - log(red)*log(red)*sqrt(red) * 1.5;
    blue = 255 - log(green)*log(green)*sqrt(green) * 1.5;  
    setRGB(red,green,blue);
    tone(5,brightness);    
  } else {
    setRGB(0,0,0);
    noTone(5);
  }
}

void setRGB(int red, int green, int blue) {
  analogWrite(ledR, red);
  analogWrite(ledG, green);
  analogWrite(ledB, blue);  
}